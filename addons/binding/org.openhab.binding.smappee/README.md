# Smappee Binding

This binding integrates the [Smappee energy monitor](http://www.smappee.com/be_en/home).

## Introduction

Thanks to the Smappee energy monitor you always know how much power your appliances consume, wherever you are. For more comfort, a better insight and sustainable energy savings up to 30%.

Both the Energy monitor and the Solar energy monitor can be used. These can be bought online in the [smappee webshop] (http://www.smappee.com/be_en/eshop/monitors.html).

The smappee supports clamps for 3 phase and 1 phase systems and there is a separate circuit clamp for your solar system. installation manuals can be found on [their support page](https://www.smappee.com/be_en/support)

## Supported Things

This binding provides 1 thing type : 'smappee'. There should be only 1 smappee device installed in your home.

## Discovery

Discovery is not supported for this binding, the smappee thing must be configured manually. 

## Thing Configuration

As described on their [support page] (https://support.smappee.com/hc/en-us/articles/202153935-Where-can-I-find-the-API-documentation-), you need to email [support@smappee.com] (mailto:support@smappee.com) to get a client ID and a client secret to access the api. In that mail you need to provide them :
- Full name: your full name
- Monitor serial number: this can be found at the back of your smappee
- Account username: the username you use to log in in Smappee, same as thing setting 'Username'

### Configuration in PaperUi

Following settings must be configured in order to make your smappee binding work :

| Setting              |                                                                        |
|----------------------|------------------------------------------------------------------------|
|Client Id             | The Smappee Api Oauth client id (obtain by mail from smappee support) |
|Client Secret         | The Smappee Api Oauth client secret (obtain by mail from smappee support)|
|Username              | The username of your Smappee|
|Password              | The password of your Smappee|
|Service location name | The name of your Smappee installation|
|Polling time          | How often (in minutes) does the smappee needs to be checked ?|

### Configuration with config files

A manual setup through a `things/smappee.things` file could look like this:

```
Thing smappee:smappee:mySmappee "Smappee" @ "Living Room" [client_id="xxx", client_secret="xxx", username="xxx", password="xxx", servicelocationname="xxx", polltime=5]
```

## Channels

The following channels are supported :

| Channel Type ID         | Item Type    | Description                                       |
|-------------------------|--------------|---------------------------------------------------|
| consumption             | Number       | The amount of energy that is being consumed now|
| solar                   | Number       | The amount of energy that is being generated by your solar power panels now|
| alwayson                | Number       | The amount of energy that is always consumed|
 
## Item configuration

### Configuration with config files

A manual configuration through a `demo.items` file could look like this:

```
Number mySmappee_Consumption  "Consumption [%s]"   { channel="smappee:smappee:mySmappee:consumption" }
Number mySmappee_Solar        "Solar [%s]"         { channel="smappee:smappee:mySmappee:solar" }
Number mySmappee_AlwaysOn     "Always On [%s]"     { channel="smappee:smappee:mySmappee:alwayson" }
```

### Known Issues, to be implemented

- The detected appliances don't appear as seperate devices in openhab.

- The plugs can not be controlled with this binding.
