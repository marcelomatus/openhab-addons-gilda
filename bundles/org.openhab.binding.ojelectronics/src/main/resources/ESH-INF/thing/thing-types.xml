<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="ojelectronics"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
    xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

    <!-- Bridge -->
    <bridge-type id="bridge">
        <label>OJ Electronics Bridge</label>
        <description>Bridge to access OJ Electronic devices.</description>
        <config-description>
            <parameter name="userName" type="text" required="true">
                <label>User Name</label>
                <description>User Name for access to OJ Electronics cloud service.</description>
            </parameter>
            <parameter name="password" type="text" required="true">
                <label>Password</label>
                <description>Password for access to OJ Electronics cloud service.</description>
                <context>password</context>
            </parameter>
            <parameter name="apiUrl" type="text" required="true">
                <label>API-URL</label>
                <description>URL to cloud API-service.</description>
                <context>url</context>
                <advanced>true</advanced>
                <default>https://OWD5-OJ001-App.ojelectronics.com/api</default>
            </parameter>
           <parameter name="refreshDelayInSeconds" type="integer" required="true">
                <label>Refresh delay</label>
                <description>Refresh delay in seconds.</description>
                <advanced>true</advanced>
                <default>30</default>
                <min>15</min>
            </parameter>            
            <parameter name="customerId" type="integer" required="true">
                <label>Customer ID</label>
                <description>Customer ID</description>
                <advanced>true</advanced>
                <default>1</default>
            </parameter>
            <parameter name="APIKEY" type="text" required="true">
                <label>APIKEY</label>
                <description>APIKEY</description>
                <advanced>true</advanced>
                <context>password</context>
                <default>f219aab4-9ac0-4343-8422-b72203e2fac9</default>
            </parameter>
            <parameter name="softwareVersion" type="integer" required="true">
                <label>Software Version</label>
                <description>Software Version</description>
                <advanced>true</advanced>
                <default>1060</default>
            </parameter>
        </config-description>
    </bridge-type>

    <thing-type id="owd5">
        <supported-bridge-type-refs>
            <bridge-type-ref id="bridge" />
        </supported-bridge-type-refs>

        <label>OJ Electronics OWD5/MWD5 Thermostat</label>
        <description>OJ Electronics OWD5/MWD5 Thermostat</description>
        <category>RadiatorControl</category>

        <channels>
            <channel id="floorTemperature" typeId="floorTemperature" />
            <channel id="roomTemperature" typeId="roomTemperature" />
            <channel id="groupName" typeId="groupName" />
            <channel id="groupId" typeId="groupId" />
            <channel id="online" typeId="online" />
            <channel id="heating" typeId="heating" />
            <channel id="thermostatName" typeId="thermostatName" />
            <channel id="regulationMode" typeId="regulationMode" />
        </channels>

        <config-description>
            <parameter name="serialNumber" type="text" required="true">
                <label>Serial Number</label>
                <description>Serial number of the thermostat. You can find the serial number in the app or on the
                    thermostat itself.
                </description>
            </parameter>
        </config-description>

    </thing-type>

    <channel-type id="floorTemperature">
        <item-type>Number</item-type>
        <label>Floor temperature</label>
        <category>Temperature</category>
        <state pattern="%.1f °C" readOnly="true" />
    </channel-type>
    <channel-type id="groupName">
        <item-type>String</item-type>
        <label>Group name</label>
        <state readOnly="true"/>
    </channel-type>
    <channel-type id="groupId">
        <item-type>Number</item-type>
        <label>Group Id</label>
        <state readOnly="true"/>
    </channel-type>
    <channel-type id="online">
        <item-type>Switch</item-type>
        <label>Online</label>
        <state readOnly="true"/>
    </channel-type>
    <channel-type id="heating">
        <item-type>Switch</item-type>
        <label>Heating</label>
        <state readOnly="true"/>
    </channel-type>
        <channel-type id="roomTemperature">
        <item-type>Number</item-type>
        <label>Room temperature</label>
        <category>Temperature</category>
        <state pattern="%.1f °C" readOnly="true" />
    </channel-type>    
    <channel-type id="thermostatName">
        <item-type>String</item-type>
        <label>Thermostat name</label>
        <state readOnly="true"/>
    </channel-type>
    <channel-type id="regulationMode">
        <item-type>String</item-type>
        <label>Regulation mode</label>
        <state readOnly="true">
            <options>
                <option value="1">Auto</option>
                <option value="2">Comfort</option>
                <option value="3">Manual</option>
                <option value="4">Vacation</option>
                <option value="6">Frost protection</option>
                <option value="8">Boost</option>
                <option value="9">Eco</option>
            </options>
        </state>
    </channel-type>
</thing:thing-descriptions>
